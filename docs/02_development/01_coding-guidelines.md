# コーディングガイドライン

このドキュメントはプロジェクトのコーディングに関する推奨事項です。

## 関数

- 複数の異なる責務を1つの関数に過剰に混在させない。
- 関数化は「再利用」「テスタビリティ」「可読性」のいずれかに寄与する場合のみ行う。
- コードの重複防止や複雑度軽減に寄与しない小さな関数は作らない。
- 関数はできるだけ短く保ち、長くなる場合は適切に分割する。
- 関数名は処理内容や返り値が分かるように命名する。

## 副作用

- 意図した副作用以外は使わない。

## オブジェクト操作

- 引数は不変として扱い、直接変更しない。
- 検索条件やフィルタリング用のオブジェクトは、空オブジェクトから始めて必要な場合のみプロパティを追加する方式を推奨する。
- `if (Object.keys(obj).length > 0)` のような空オブジェクトの真偽値判定は避け、明示的な条件チェックを行う。
- 変更可能なオブジェクトのスコープは最小限に抑える。

## 型指定・型安全

- TypeScriptの自動推論が不十分な場合（例: 関数の引数・戻り値、外部APIのレスポンス、複雑なオブジェクトリテラルなど）は型アノテーションを明示的に記述する。
- 型推論が十分な場合は冗長な型アノテーションは省略する。
- 型アサーション（as構文）は、自動型推論や型ガードで表現できない場合、または実装者が型安全性を十分に理解した上で「型推論よりも自分の知識が正しい」と確信できる場合のみ使用する。
- 型アサーションの多用は避け、型安全な設計・型ガードの活用を優先する。
- 型が崩れた場合にコンパイルエラーが出る設計（型駆動設計）を優先する。

## コメント

- 「何をしているか」ではなく「なぜそうしているか」をコメントに記述する。

## 複雑度・品質指標

- 関数の行数：50行以内を推奨
- 関数の引数：4個以内を推奨
- ネストレベル：3段階以内を推奨
- サイクロマティック複雑度：10以下を推奨
