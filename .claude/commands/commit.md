---
allowed-tools: [Bash, Read, Edit, TodoWrite]
description: 未コミットファイルを分析し、論理的に関連する変更を適切な粒度でコミットする
---

# commit.md

## 実行手順

1. **作業計画の作成**
   - TodoWriteツールを使用して必要なタスクをリスト化
   - 各ステップを明確化：品質チェック、コードクリーンアップ、コミット準備

2. **品質チェック（コミット前必須）**
   - プロジェクトで定義された品質チェックを実行
   - 一般的な例：
     - Linter/Formatter（ESLint、Prettier、ktlint、rustfmtなど）
     - 型チェック（TypeScript、Flowなど）
     - テスト実行（Jest、pytest、JUnitなど）
   - `make lint`、`npm run check`などのプロジェクト固有のコマンドを確認
   - 品質チェックでエラーや警告が発生した場合、コミットの実行を停止

3. **未コミット状態の確認**
   - `git status`で変更されたファイルをリスト化
   - `git diff --stat`で変更統計を確認
   - `git diff`で具体的な変更を分析

4. **変更のグループ化**
   - 論理的に分類：機能追加、バグ修正、リファクタリング、スタイル修正など
   - 関連ファイルをまとめる
   - 不要なデバッグコードやコメントを削除

5. **適切な粒度でコミット**
   - 各グループごとに独立したコミットを作成
   - Conventional Commits形式でメッセージを記述
   - 日本語で明確な説明を追加
   - 原則：1コミット = 1つの論理的な変更

6. **品質の確保**
   - lefthookのpre-commitフックが実行されることを確認
   - コミットメッセージの検証が通過することを確認
   - 最終的な`git status`でクリーンな状態を確認

7. **プロジェクトメモリの更新を検討**
   - 作業中に発見した技術的な問題や解決策を`CLAUDE.md`に追加することを検討
   - 新しいエラーパターン、ライブラリの使用方法、設定のメモなど
   - 将来の開発効率向上のため知識を蓄積

## コミットメッセージ形式

```
<type>[optional scope]: <description>

[optional body]

[optional footer]
```

- type（必須）：コード変更のカテゴリを示す（例：feat、fix、docs、styleなど）
- scope（任意）：変更されたコードの領域を定義（例：core、api、ui）
- description（必須）：**日本語で記述すること**。変更を要約した短いフレーズ（50文字程度を目安）
- body（任意）：**日本語で記述すること**。必要に応じて変更の詳細な説明を提供
- footer（任意）：「BREAKING CHANGE」や課題参照などの追加情報を記載

### 日本語コミットメッセージの例

```
feat: ポケモン検索機能を追加

- タイプ別フィルタリング機能を実装
- 地方別絞り込み機能を追加
- レスポンシブ対応のUI設計
```

```
fix: 図鑑データの表示バグを修正

キタカミ地方のポケモン順序が正しく表示されない問題を解決
```

```
docs: APIドキュメントを更新

新しいエンドポイントの仕様書を追加
```

## 実行例

1. コードのlint/formatを実行
2. 型チェックを実行（該当する場合）
3. テストを実行
4. 不要なコメントやデバッグコードを削除
5. `git status`を確認してコミット準備
6. プロジェクトメモリの更新を検討

## 注意事項

- **コミット前に必ず品質チェックを実行すること**
- テストが失敗した場合、関連するテストかどうかを確認
- エラーや警告は可能な限りコミット前に解決
- 特殊文字を含むパスは適切にエスケープ
- プロジェクト固有のビルドツールやコマンドを確認（Makefile、package.json、build.gradleなど）
